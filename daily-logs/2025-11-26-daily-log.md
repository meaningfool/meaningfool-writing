---
title: "Activity Log - 2025-11-26"
date: 2025-11-26
---

## Analysis

- **Performed Architectural Review and Refactoring of Graph Validation Feature**:
  - Identified technical debt in the monolithic `validateGraph` function (162 lines, "God Function" mixing disparate rules)
  - Created detailed refactoring plan with 3 slices, ordered by risk: Components → Mapper → Validation Strategies
  - Executed the refactoring: extracted `CustomNode`, `CustomEdge`, edge path utilities, ReactFlow mapper, and individual validators
  - Key architectural patterns applied:
    - **Strategy Pattern for Validation**: Orchestrator (`graph-validation.ts`) coordinates validators but knows nothing about specific rules
    - **Smart Components, Dumb Containers**: Pushed edge path complexity down into `CustomEdge` so `LineageGraph` becomes declarative
    - **Hexagonal Architecture**: Domain layer (validators) is pure TypeScript with zero UI dependencies; `reactflow-mapper.ts` acts as Anti-Corruption Layer

- **Documented Architectural Insights**:
  - Created comprehensive architecture review with Mermaid dependency diagram
  - Analyzed the codebase through the lens of Hexagonal Architecture (Ports and Adapters)
  - Key insight: The separation allows business logic to be tested without a browser and makes the UI library swappable

- **Learnings Captured**:
  - **Robust Testing with `data-testid`**: Relying on text content is fragile; use `data-testid` and configure production builds to strip them via `reactRemoveProperties`
  - **Visual Verification Strategy**: "If it's visual, the test should take a picture" - use screenshot assertions for reproducible, version-controlled artifacts

## Raw Commits

Repository: meaningfool/lineage-graph-app
Commit: [f92d5f3745b8903ba0b387b06cf1d1a26fa8324b] docs: update learnings and research with architectural insights

Repository: meaningfool/lineage-graph-app
Commit: [ac4c703f27820f6afbc5c1222d6bfce59331ce91] chore: configure robust testing with data-testid stripping

Repository: meaningfool/lineage-graph-app
Commit: [2f15e6fdc2c2e6d3c4b5d7e59476b5742bbbaf97] refactor(graph-validation): extract components, validators, and mapper

Repository: meaningfool/lineage-graph-app
Commit: [16708f080ddfba14c27581529825b3a3fe772210] docs: add complex graph fixtures and refactoring plan

Repository: meaningfool/lineage-graph-app
Commit: [3d0aded9e0023f95e9dba2ba84406ecadaa609bd] docs: expand hexagonal architecture analysis with detailed verdicts
